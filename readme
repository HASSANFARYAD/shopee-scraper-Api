# Shopee Scraper API

## ğŸš€ Introduction

This project is a **Shopee Scraper API** built using **Node.js, Puppeteer, and Bright Data proxies**. It retrieves product details from **Shopee Taiwan** while bypassing anti-scraping mechanisms using headless browsing, user-agent rotation, and proxy tunneling.

## ğŸ“Œ Features

- âœ… **Uses Puppeteer Stealth Mode** to avoid detection.
- âœ… **Bright Data Proxy Integration** for anonymous requests.
- âœ… **Proxy Rotation** to prevent IP blocking.
- âœ… **Rate Limiting** to prevent abuse.
- âœ… **Caching** to reduce redundant requests.

---

## ğŸ› ï¸ Tech Stack

- **Node.js** (Server)
- **Express.js** (REST API)
- **Puppeteer** (Headless browser)
- **Bright Data** (Proxy service)
- **Node-Cache** (Caching)

---

## ğŸ“¥ Installation

### 1ï¸âƒ£ **Clone the repository**

```sh
git clone https://github.com/YOUR_USERNAME/shopee-scraper-api.git
cd shopee-scraper-api
```

### 2ï¸âƒ£ **Install dependencies**

```sh
npm install
```

### 3ï¸âƒ£ **Set up your Bright Data Proxy**

Edit the `server.js` file and update the proxy credentials:

```javascript
const brightDataProxy = {
  host: "brd.superproxy.io",
  port: 22225, // Correct Port
  username: "YOUR_USERNAME",
  password: "YOUR_PASSWORD",
};
```

### 4ï¸âƒ£ **Run the server**

```sh
node server.js
```

---

## ğŸ“¡ API Endpoints

### **1ï¸âƒ£ Fetch Shopee Product Data**

#### ğŸ”— **Endpoint:**

```sh
GET /shopee?storeId=178926468&dealId=21448123549
```

#### ğŸ” **Example Response:**

```json
{
  "itemid": 21448123549,
  "shopid": 178926468,
  "name": "Product Name",
  "price": 1500,
  "stock": 25
}
```

### **2ï¸âƒ£ Health Check**

#### ğŸ”— **Endpoint:**

```sh
GET /status
```

#### ğŸ” **Example Response:**

```json
{
  "status": "OK",
  "uptime": 1200,
  "timestamp": "2025-03-22T12:00:00Z"
}
```

---

## ğŸ›¡ï¸ Security & Anti-Detection Measures

- **Puppeteer Stealth Plugin** (Hides bot fingerprints)
- **User-Agent Rotation** (Simulates different browsers)
- **Session Rotation** (Avoids bans from repeated requests)
- **Proxy Tunneling** (Anonymous browsing)

---

## ğŸ› ï¸ Troubleshooting

### âŒ `ERR_TUNNEL_CONNECTION_FAILED`

- Ensure your **Bright Data credentials are correct**
- Run a test:

```sh
curl -x http://YOUR_USERNAME:YOUR_PASSWORD@brd.superproxy.io:22225 https://ipinfo.io
```

### âŒ `Failed to fetch Shopee data`

- Try using a **different proxy zone** (e.g., `residential_proxy2` instead of `residential_proxy1`).
- Use **session rotation** by appending `-session-${Math.floor(Math.random() * 10000)}` to your proxy username.

---

## ğŸ¯ Future Improvements

- Implement **automatic proxy switching** if one fails.
- Add **captcha solving** for tougher restrictions.
- Support **multiple e-commerce sites** beyond Shopee.

---

## ğŸ“ Contact

For any issues, feel free to open an **Issue** or reach out via [your email or GitHub].

**ğŸš€ Happy Scraping!**
